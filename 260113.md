# 배터리 RUL 예측 모델 고도화 작업 보고서 (2026-01-13)

## 1. 개요 (Overview)
이 문서는 배터리의 **잔존 수명(RUL, Remaining Useful Life)**을 더 정확하게 예측하기 위해 DeepSurv 모델을 개선한 과정을 정리한 보고서입니다. 이번 작업의 핵심은 배터리가 충/방전할 때 나타나는 **전압과 전류의 패턴(형상)**을 수학적으로 추출하여 인공지능에게 학습시킨 것입니다.

---

## 2. 주요 개념 설명 (Key Concepts)
초보자도 이해할 수 있도록 이번에 사용된 핵심 용어들을 쉽게 풀이했습니다.

### 2.1 DeepSurv (딥러닝 기반 생존 분석)
*   **비유:** 의사가 환자의 수술 후 생존 확률을 예측하듯이, 배터리가 앞으로 얼마나 더 작동할 수 있을지(생존할지) 예측하는 인공지능 모델입니다.
*   **특징:** 단순히 "몇 시간 남았다"만 맞추는 것이 아니라, "지금 이 배터리가 고장 날 위험도가 얼마나 높은가?"를 계산합니다.

### 2.2 Path Signature (경로 시그니처)
*   **정의:** 시계열 데이터(시간에 따라 변하는 데이터)의 **기하학적 모양**을 숫자로 요약하는 수학적 기법입니다.
*   **왜 썼나요?** 배터리가 늙으면 충전할 때 전압이 올라가는 곡선의 모양이 미묘하게 바뀝니다. 사람은 눈으로 보면 "어? 곡선이 좀 찌그러졌네?"라고 알 수 있지만, 컴퓨터는 숫자로 줘야 압니다. Path Signature는 이 **'찌그러짐'이나 '굴곡' 같은 모양 정보**를 컴퓨터가 이해하기 쉬운 숫자로 바꿔줍니다.
*   **핵심:** 전압과 전류가 그리는 '경로(Path)'의 특징을 추출합니다.

### 2.3 Delta Q(V) (용량 차이 곡선)
*   **정의:** 새 배터리였을 때의 전압별 용량 곡선과, 현재 늙은 배터리의 곡선을 뺀 차이입니다.
*   **의미:** 배터리 내부 물질이 얼마나 손상되었는지를 가장 직접적으로 보여주는 지표로 알려져 있습니다.

### 2.4 C-Index (일치도 지수)
*   **정의:** 예측의 **'순서'**가 얼마나 정확한지 나타내는 점수입니다. (0 ~ 1 사이 값)
*   **예시:** 배터리 A가 B보다 더 오래 살았는데, 모델도 "A가 B보다 오래 살 거야"라고 맞췄다면 점수를 얻습니다.
*   **점수 해석:** 0.5는 찍어서 맞춘 수준(동전 던지기), 1.0은 완벽한 예측입니다. 0.9 이상이면 매우 우수한 모델입니다.

### 2.5 RMSE (평균 제곱근 오차)
*   **정의:** 예측한 수명과 실제 수명이 몇 사이클(Cycle)이나 차이 나는지를 나타내는 오차 값입니다.
*   **해석:** 값이 **작을수록** 좋습니다. (예: RMSE가 50이면, 평균적으로 50 사이클 정도 틀린다는 뜻)

---

## 3. 작업 내용 및 결과 (Progress & Results)

### 3.1 Path Signature 적용 (성능 대폭 향상! 🚀)
*   **방법:** 배터리 데이터(전압, 전류, 시간)에서 `iisignature` 라이브러리를 사용해 기하학적 특징(Level 2) 12개를 추출하여 모델에 입력으로 넣어주었습니다.
*   **결과:**
    *   기본 모델(C-Index): **0.87 ~ 0.90**
    *   Path Signature 적용 후: **0.91 ~ 0.94**
    *   **분석:** 약 **0.03 (3%) 이상의 성능 향상**이 있었습니다. 배터리의 노화 패턴을 기하학적으로 분석하는 것이 매우 유효함을 증명했습니다.

### 3.2 Delta Q(V) 적용 (추가 이득 없음)
*   **방법:** Path Signature가 적용된 모델에 추가로 Delta Q(V) 특징(분산, 왜도 등)을 더 넣어보았습니다.
*   **결과:** 성능이 더 오르지 않거나 아주 미세하게 떨어졌습니다.
*   **분석:** 이미 Path Signature가 배터리의 전압 곡선 모양 변화를 충분히 잘 설명하고 있어서, Delta Q(V) 정보가 겹쳤거나(중복), 오히려 불필요한 정보(노이즈)가 되었을 가능성이 있습니다. **따라서 Path Signature만 쓰는 것이 가장 효율적입니다.**

### 3.3 평가 지표 확장 (Metric Expansion)
*   기존에는 순서만 맞추는(C-Index) 모델이었으나, 이제는 **"그래서 몇 사이클 남았는데?"**를 대답할 수 있도록 기능을 추가했습니다.
*   **구현 내용:**
    *   **Breslow Estimator:** 각 시점별 고장 확률을 계산하는 수리적 도구 구현.
    *   **Expected RUL:** 생존 확률 곡선의 면적을 계산하여 '기대 잔존 수명' 산출.
    *   **RMSE 산출:** 실제 수명과 예측 수명의 오차를 계산하여 모델의 신뢰성 검증 가능.

---

## 4. 최종 결론 및 요약 (Conclusion)

| 모델 종류 | 입력 데이터 개수 | 성능 (C-Index) | 비고 |
| :--- | :--- | :--- | :--- |
| **1. 기본 모델** | 5개 | 0.89 (우수) | 기준 모델 |
| **2. Path Signature 모델** | **17개** | **0.92+ (최우수)** 🏆 | **가장 추천함** |
| **3. Delta Q 추가 모델** | 23개 | 0.92 (변화 없음) | 복잡하기만 함 |

**결론:**
우리는 **Path Signature** 기술을 도입하여 배터리 수명 예측 모델의 정확도를 크게 높이는 데 성공했습니다. 이제 이 '똑똑해진 모델'은 배터리의 전압 곡선 모양만 보고도 "이 배터리는 앞으로 약 300 사이클 더 쓸 수 있습니다"라고 구체적으로 말해줄 수 있게 되었습니다.
